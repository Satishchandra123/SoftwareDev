<!DOCTYPE html>
<html>
    <head>
        <title>RegisterPage</title>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
        <style>
            body {
                background-color: skyblue;
            }
            .container {
                padding: 106px;
            }

            input[type=text], input[type=password], input[type=email] {
                width: 70%;
                padding: 10px;
                margin: 55px 0 10px 0;
                display: inline-block;
                border: none;
                background:white;
                color: black;
            }

            .button {
                text-align:center;
                margin-right: auto;
                margin-left: 280px;
                margin-top: 35px;
                margin-bottom: 20px;
            }

            form {
                display: inline-block;
                width: 80%;
                text-align: right;
                font-weight: bold;
                color:black;
            }
            p{
                text-align: center;
                color: red;
                padding: 20;
            }
        </style>
    </head>
        <body bgcolor="skyblue" topmargin="40" leftmargin="20" rightmargin="20">
            <div class="container">
            <h1 style="color:black;text-align:center;">REGISTRATION PAGE</h1>
            {%if name%}
                <p>{{name}}</p>
            {%endif%}
                <p>{{message}}</p>
                <script type="text/javascript">

                    function checkPassword(str) {
                        if (str.match(/[a-z]/g) && str.match( 
                                    /[A-Z]/g) && str.match( 
                                    /[0-9]/g) && str.match( 
                                    /[^a-zA-Z\d]/g) && str.length >= 6) {
                            return true
                        } else {
                            return false
                        }
                    }
                
                    function ValidateEmail(email) {
                        if (/^\w+([\.-]?\w+)@\w+([\.-]?\w+)(\.\w{2,3})+$/.test(email)) {
                            return true
                        } else {
                            return false
                        }
                    }
                
                    function checkForm(form) {
                        console.log("Hello");
                        if(form.name.value == "") {
                            document.getElementById("textdisplay").innerHTML="Username can't be empty";
                            return false;
                        }
                        if(form.email.value == "") {
                            document.getElementById("textdisplay").innerHTML="email can't be empty";
                            return false;
                        }
                        else if(!ValidateEmail(form.email.value)) {
                            document.getElementById("textdisplay").innerHTML="You have entered an invalid email address";
                            return false;
                        } else {
                            if(form.pwd.value != "") {
                                if(!checkPassword(form.pwd.value)) {
                                    document.getElementById("textdisplay").innerHTML="The password length should be minimum 6 and must contain atleast one uppercase letter, one number, and a special character";
                                    return false;
                                }
                            }
                            else {
                                document.getElementById("textdisplay").innerHTML="password can't be empty";
                                return false;
                            }
                        }
                        return true;
                    }
                </script>
                <form action = "{{url_for('register')}}" method="POST" onsubmit=" return checkForm(this);">
                    User Name:
                    &emsp; <input name="name" type="text" placeholder="Enter user name" required><br/>
                    enter email:
                    &emsp; <input name="email" type="email" placeholder="Enter email" required><br/>
                    Enter Password:
                    &emsp; <input name="pwd" type="password" placeholder="Enter Password" required><br/>
                    <div class="button">
                        <button type="submit" class="btn btn-primary">REGISTER</button>
                        <button type="submit" formaction="/auth" class="btn btn-primary">LOGIN</button>
                    </div></br>
                </form>
                <p id = "textdisplay"></p>
        </body>
</html>